---
layout: post
title: '"repeat your email address" validation in Magento'
date: 2015-09-25 20:11:36.000000000 +00:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- html
- javascript
- Magento
- PHP
tags:
- email
- form validation
- html
- javascript
- Magento
- PHP
- repeat email
- validation
meta:
  _rest_api_client_id: "-1"
  _rest_api_published: '1'
  _publicize_job_id: '15165104414'
author:
  login: lurajcevi
  email: traxdater12@gmail.com
  display_name: lurajcevi
  first_name: ''
  last_name: ''
---
<p>Imagine a form like this one:</p>
<p><a href="https://lurajcevi.files.wordpress.com/2015/09/dup_email.png"><img class="alignnone  wp-image-401" src="{{ site.baseurl }}/assets/dup_email.png?w=300" alt="dup_email" width="436" height="105" /></a></p>
<p>What can we do to implement a "Repeat email" frontend validation? As you already know, Magento has a class-based frontend validation of forms. If you add a class to the form field, it will pass through the validation, and a message will appear if it validation failed. For example, adding <code>class="required"</code> to your  elements will prevent the form submission until said field is populated. Easy as that. Where are those rules located? <code>/js/prototype/validation.js</code> has many rules (eg. <code>validate-cc-number, validate-email, validate-number</code> etc.).</p>
<p>How should we go about implementing our "validate-both-emails" rule? If you've checked the validation.js file I've mentioned above, you could see that all the rules are added via <code>Validation.addAllThese([array of rules]). </code>So, we should do precisely that in our own javascript file (the one you will include on your page).</p>
<p>Here is the code:<br />
<code><br />
Validation.addAllThese([ ['validate-both-email', 'Please make sure your emails match', function(v, input) {<br />
  var dependentInput = $('first_email_input_id');<br />
  var isEqualValuesÂ  = (input.value == dependentInput.value);</p>
<p>  if (input.value == dependentInput.value &amp;&amp; dependentInput.hasClassName('validation-failed')) {<br />
    Validation.test(this.className, dependentInput);<br />
  }</p>
<p>  return dependentInput.value == '' || isEqualValues;<br />
}]]);<br />
</code></p>
<p>Now, if you add a <code>class="validate-both-email"</code> to your repeated email input, and instantiate Magento validation in the same file as the form like this <code>var myForm = new VarienForm('your_form_id');</code>, your form (ie. Magento) will check if both fields are entered and if they match before it submits the form.</p>
<p>Cool, right?</p>
<p>Cheers.</p>
